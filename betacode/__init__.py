import re
import string
import unicodedata

b_to_g = {
    "#": "ʹ",
    "(": "ʽ",
    ")": "ʼ",
    "*(/A": "Ἅ",
    "*(/E": "Ἕ",
    "*(/H": "Ἥ",
    "*(/I": "Ἵ",
    "*(/O": "Ὅ",
    "*(/U": "Ὕ",
    "*(/W": "Ὥ",
    "*(/a": "Ἅ",
    "*(/e": "Ἕ",
    "*(/h": "Ἥ",
    "*(/i": "Ἵ",
    "*(/o": "Ὅ",
    "*(/u": "Ὕ",
    "*(/w": "Ὥ",
    "*(/|A": "ᾍ",
    "*(/A|": "ᾍ",
    "*(/|H": "ᾝ",
    "*(/H|": "ᾝ",
    "*(/|W": "ᾭ",
    "*(/W|": "ᾭ",
    "*(/|a": "ᾍ",
    "*(/a|": "ᾍ",
    "*(/|h": "ᾝ",
    "*(/h|": "ᾝ",
    "*(/|w": "ᾭ",
    "*(/w|": "ᾭ",
    "*(=A": "Ἇ",
    "*(=H": "Ἧ",
    "*(=I": "Ἷ",
    "*(=U": "Ὗ",
    "*(=W": "Ὧ",
    "*(=a": "Ἇ",
    "*(=h": "Ἧ",
    "*(=i": "Ἷ",
    "*(=u": "Ὗ",
    "*(=w": "Ὧ",
    "*(=|A": "ᾏ",
    "*(=A|": "ᾏ",
    "*(=|H": "ᾟ",
    "*(=H|": "ᾟ",
    "*(=|W": "ᾯ",
    "*(=W|": "ᾯ",
    "*(=|a": "ᾏ",
    "*(=a|": "ᾏ",
    "*(=|h": "ᾟ",
    "*(=h|": "ᾟ",
    "*(=|w": "ᾯ",
    "*(=w|": "ᾯ",
    "*(A": "Ἁ",
    "*(E": "Ἑ",
    "*(H": "Ἡ",
    "*(I": "Ἱ",
    "*(O": "Ὁ",
    "*(R": "Ῥ",
    "*(U": "Ὑ",
    "*(W": "Ὡ",
    "*(\\A": "Ἃ",
    "*(\\E": "Ἓ",
    "*(\\H": "Ἣ",
    "*(\\I": "Ἳ",
    "*(\\O": "Ὃ",
    "*(\\U": "Ὓ",
    "*(\\W": "Ὣ",
    "*(\\a": "Ἃ",
    "*(\\e": "Ἓ",
    "*(\\h": "Ἣ",
    "*(\\i": "Ἳ",
    "*(\\o": "Ὃ",
    "*(\\u": "Ὓ",
    "*(\\w": "Ὣ",
    "*(\\|A": "ᾋ",
    "*(\\A|": "ᾋ",
    "*(\\|H": "ᾛ",
    "*(\\H|": "ᾛ",
    "*(\\|W": "ᾫ",
    "*(\\W|": "ᾫ",
    "*(\\|a": "ᾋ",
    "*(\\a|": "ᾋ",
    "*(\\|h": "ᾛ",
    "*(\\h|": "ᾛ",
    "*(\\|w": "ᾫ",
    "*(\\w|": "ᾫ",
    "*(a": "Ἁ",
    "*(e": "Ἑ",
    "*(h": "Ἡ",
    "*(i": "Ἱ",
    "*(o": "Ὁ",
    "*(r": "Ῥ",
    "*(u": "Ὑ",
    "*(w": "Ὡ",
    "*(|A": "ᾉ",
    "*(A|": "ᾉ",
    "*(|H": "ᾙ",
    "*(H|": "ᾙ",
    "*(|W": "ᾩ",
    "*(W|": "ᾩ",
    "*(|a": "ᾉ",
    "*(a|": "ᾉ",
    "*(|h": "ᾙ",
    "*(h|": "ᾙ",
    "*(|w": "ᾩ",
    "*(w|": "ᾩ",
    "*)/A": "Ἄ",
    "*)/E": "Ἔ",
    "*)/H": "Ἤ",
    "*)/I": "Ἴ",
    "*)/O": "Ὄ",
    "*)/W": "Ὤ",
    "*)/a": "Ἄ",
    "*)/e": "Ἔ",
    "*)/h": "Ἤ",
    "*)/i": "Ἴ",
    "*)/o": "Ὄ",
    "*)/w": "Ὤ",
    "*)/|A": "ᾌ",
    "*)/A|": "ᾌ",
    "*)/|H": "ᾜ",
    "*)/H|": "ᾜ",
    "*)/|W": "ᾬ",
    "*)/W|": "ᾬ",
    "*)/|a": "ᾌ",
    "*)/a|": "ᾌ",
    "*)/|h": "ᾜ",
    "*)/h|": "ᾜ",
    "*)/|w": "ᾬ",
    "*)/w|": "ᾬ",
    "*)=A": "Ἆ",
    "*)=H": "Ἦ",
    "*)=I": "Ἶ",
    "*)=W": "Ὦ",
    "*)=a": "Ἆ",
    "*)=h": "Ἦ",
    "*)=i": "Ἶ",
    "*)=w": "Ὦ",
    "*)=|A": "ᾎ",
    "*)=A|": "ᾎ",
    "*)=|H": "ᾞ",
    "*)=H|": "ᾞ",
    "*)=|W": "ᾮ",
    "*)=W|": "ᾮ",
    "*)=|a": "ᾎ",
    "*)=a|": "ᾎ",
    "*)=|h": "ᾞ",
    "*)=h|": "ᾞ",
    "*)=|w": "ᾮ",
    "*)=w|": "ᾮ",
    "*)A": "Ἀ",
    "*)E": "Ἐ",
    "*)H": "Ἠ",
    "*)I": "Ἰ",
    "*)O": "Ὀ",
    "*)W": "Ὠ",
    "*)\\A": "Ἂ",
    "*)\\E": "Ἒ",
    "*)\\H": "Ἢ",
    "*)\\I": "Ἲ",
    "*)\\O": "Ὂ",
    "*)\\W": "Ὢ",
    "*)\\a": "Ἂ",
    "*)\\e": "Ἒ",
    "*)\\h": "Ἢ",
    "*)\\i": "Ἲ",
    "*)\\o": "Ὂ",
    "*)\\w": "Ὢ",
    "*)\\|A": "ᾊ",
    "*)\\A|": "ᾊ",
    "*)\\|H": "ᾚ",
    "*)\\H|": "ᾚ",
    "*)\\|W": "ᾪ",
    "*)\\W|": "ᾪ",
    "*)\\|a": "ᾊ",
    "*)\\a|": "ᾊ",
    "*)\\|h": "ᾚ",
    "*)\\h|": "ᾚ",
    "*)\\|w": "ᾪ",
    "*)\\w|": "ᾪ",
    "*)a": "Ἀ",
    "*)e": "Ἐ",
    "*)h": "Ἠ",
    "*)i": "Ἰ",
    "*)o": "Ὀ",
    "*)w": "Ὠ",
    "*)|A": "ᾈ",
    "*)A|": "ᾈ",
    "*)|H": "ᾘ",
    "*)H|": "ᾘ",
    "*)|W": "ᾨ",
    "*)W|": "ᾨ",
    "*)|a": "ᾈ",
    "*)a|": "ᾈ",
    "*)|h": "ᾘ",
    "*)h|": "ᾘ",
    "*)|w": "ᾨ",
    "*)w|": "ᾨ",
    "*+I": "Ϊ",
    "*+U": "Ϋ",
    "*+i": "Ϊ",
    "*+u": "Ϋ",
    "*/A": "Ά",
    "*/E": "Έ",
    "*/H": "Ή",
    "*/I": "Ί",
    "*/O": "Ό",
    "*/U": "Ύ",
    "*/W": "Ώ",
    "*/a": "Ά",
    "*/e": "Έ",
    "*/h": "Ή",
    "*/i": "Ί",
    "*/o": "Ό",
    "*/u": "Ύ",
    "*/w": "Ώ",
    "*A": "Α",
    "*A(": "Ἁ",
    "*A(/": "Ἅ",
    "*A(/|": "ᾍ",
    "*A(=": "Ἇ",
    "*A(=|": "ᾏ",
    "*A(\\": "Ἃ",
    "*A(\\|": "ᾋ",
    "*A(|": "ᾉ",
    "*A)": "Ἀ",
    "*A)/": "Ἄ",
    "*A)/|": "ᾌ",
    "*A)=": "Ἆ",
    "*A)=|": "ᾎ",
    "*A)\\": "Ἂ",
    "*A)\\|": "ᾊ",
    "*A)|": "ᾈ",
    "*A/": "Ά",
    "*A\\": "Ὰ",
    "*A|": "ᾼ",
    "*B": "Β",
    "*C": "Ξ",
    "*D": "Δ",
    "*E": "Ε",
    "*E(": "Ἑ",
    "*E(/": "Ἕ",
    "*E(\\": "Ἓ",
    "*E)": "Ἐ",
    "*E)/": "Ἔ",
    "*E)\\": "Ἒ",
    "*E/": "Έ",
    "*E\\": "Ὲ",
    "*F": "Φ",
    "*G": "Γ",
    "*H": "Η",
    "*H(": "Ἡ",
    "*H(/": "Ἥ",
    "*H(/|": "ᾝ",
    "*H(=": "Ἧ",
    "*H(=|": "ᾟ",
    "*H(\\": "Ἣ",
    "*H(\\|": "ᾛ",
    "*H(|": "ᾙ",
    "*H)": "Ἠ",
    "*H)/": "Ἤ",
    "*H)/|": "ᾜ",
    "*H)=": "Ἦ",
    "*H)=|": "ᾞ",
    "*H)\\": "Ἢ",
    "*H)\\|": "ᾚ",
    "*H)|": "ᾘ",
    "*H/": "Ή",
    "*H\\": "Ὴ",
    "*H|": "ῌ",
    "*I": "Ι",
    "*I(": "Ἱ",
    "*I(/": "Ἵ",
    "*I(=": "Ἷ",
    "*I(\\": "Ἳ",
    "*I)": "Ἰ",
    "*I)/": "Ἴ",
    "*I)=": "Ἶ",
    "*I)\\": "Ἲ",
    "*I+": "Ϊ",
    "*I/": "Ί",
    "*I\\": "Ὶ",
    "*J": "Σ",
    "*K": "Κ",
    "*L": "Λ",
    "*M": "Μ",
    "*N": "Ν",
    "*O": "Ο",
    "*O(": "Ὁ",
    "*O(/": "Ὅ",
    "*O(\\": "Ὃ",
    "*O)": "Ὀ",
    "*O)/": "Ὄ",
    "*O)\\": "Ὂ",
    "*O/": "Ό",
    "*O\\": "Ὸ",
    "*P": "Π",
    "*Q": "Θ",
    "*R": "Ρ",
    "*R(": "Ῥ",
    "*S": "Σ",
    "*S1": "Σ",
    "*S2": "Σ",
    "*S3": "Ϲ",
    "*T": "Τ",
    "*U": "Υ",
    "*U(": "Ὑ",
    "*U(/": "Ὕ",
    "*U(=": "Ὗ",
    "*U(\\": "Ὓ",
    "*U+": "Ϋ",
    "*U/": "Ύ",
    "*U\\": "Ὺ",
    "*W": "Ω",
    "*W(": "Ὡ",
    "*W(/": "Ὥ",
    "*W(/|": "ᾭ",
    "*W(=": "Ὧ",
    "*W(=|": "ᾯ",
    "*W(\\": "Ὣ",
    "*W(\\|": "ᾫ",
    "*W(|": "ᾩ",
    "*W)": "Ὠ",
    "*W)/": "Ὤ",
    "*W)/|": "ᾬ",
    "*W)=": "Ὦ",
    "*W)=|": "ᾮ",
    "*W)\\": "Ὢ",
    "*W)\\|": "ᾪ",
    "*W)|": "ᾨ",
    "*W/": "Ώ",
    "*W\\": "Ὼ",
    "*W|": "ῼ",
    "*X": "Χ",
    "*Y": "Ψ",
    "*Z": "Ζ",
    "*\\A": "Ὰ",
    "*\\E": "Ὲ",
    "*\\H": "Ὴ",
    "*\\I": "Ὶ",
    "*\\O": "Ὸ",
    "*\\U": "Ὺ",
    "*\\W": "Ὼ",
    "*\\a": "Ὰ",
    "*\\e": "Ὲ",
    "*\\h": "Ὴ",
    "*\\i": "Ὶ",
    "*\\o": "Ὸ",
    "*\\u": "Ὺ",
    "*\\w": "Ὼ",
    "*a": "Α",
    "*a(": "Ἁ",
    "*a(/": "Ἅ",
    "*a(/|": "ᾍ",
    "*a(=": "Ἇ",
    "*a(=|": "ᾏ",
    "*a(\\": "Ἃ",
    "*a(\\|": "ᾋ",
    "*a(|": "ᾉ",
    "*a)": "Ἀ",
    "*a)/": "Ἄ",
    "*a)/|": "ᾌ",
    "*a)=": "Ἆ",
    "*a)=|": "ᾎ",
    "*a)\\": "Ἂ",
    "*a)\\|": "ᾊ",
    "*a)|": "ᾈ",
    "*a/": "Ά",
    "*a\\": "Ὰ",
    "*a|": "ᾼ",
    "*b": "Β",
    "*c": "Ξ",
    "*d": "Δ",
    "*e": "Ε",
    "*e(": "Ἑ",
    "*e(/": "Ἕ",
    "*e(\\": "Ἓ",
    "*e)": "Ἐ",
    "*e)/": "Ἔ",
    "*e)\\": "Ἒ",
    "*e/": "Έ",
    "*e\\": "Ὲ",
    "*f": "Φ",
    "*g": "Γ",
    "*h": "Η",
    "*h(": "Ἡ",
    "*h(/": "Ἥ",
    "*h(/|": "ᾝ",
    "*h(=": "Ἧ",
    "*h(=|": "ᾟ",
    "*h(\\": "Ἣ",
    "*h(\\|": "ᾛ",
    "*h(|": "ᾙ",
    "*h)": "Ἠ",
    "*h)/": "Ἤ",
    "*h)/|": "ᾜ",
    "*h)=": "Ἦ",
    "*h)=|": "ᾞ",
    "*h)\\": "Ἢ",
    "*h)\\|": "ᾚ",
    "*h)|": "ᾘ",
    "*h/": "Ή",
    "*h\\": "Ὴ",
    "*h|": "ῌ",
    "*i": "Ι",
    "*i(": "Ἱ",
    "*i(/": "Ἵ",
    "*i(=": "Ἷ",
    "*i(\\": "Ἳ",
    "*i)": "Ἰ",
    "*i)/": "Ἴ",
    "*i)=": "Ἶ",
    "*i)\\": "Ἲ",
    "*i+": "Ϊ",
    "*i/": "Ί",
    "*i\\": "Ὶ",
    "*j": "Σ",
    "*k": "Κ",
    "*l": "Λ",
    "*m": "Μ",
    "*n": "Ν",
    "*o": "Ο",
    "*o(": "Ὁ",
    "*o(/": "Ὅ",
    "*o(\\": "Ὃ",
    "*o)": "Ὀ",
    "*o)/": "Ὄ",
    "*o)\\": "Ὂ",
    "*o/": "Ό",
    "*o\\": "Ὸ",
    "*p": "Π",
    "*q": "Θ",
    "*r": "Ρ",
    "*r(": "Ῥ",
    "*s": "Σ",
    "*s1": "Σ",
    "*s2": "Σ",
    "*s3": "Ϲ",
    "*t": "Τ",
    "*u": "Υ",
    "*u(": "Ὑ",
    "*u(/": "Ὕ",
    "*u(=": "Ὗ",
    "*u(\\": "Ὓ",
    "*u+": "Ϋ",
    "*u/": "Ύ",
    "*u\\": "Ὺ",
    "*w": "Ω",
    "*w(": "Ὡ",
    "*w(/": "Ὥ",
    "*w(/|": "ᾭ",
    "*w(=": "Ὧ",
    "*w(=|": "ᾯ",
    "*w(\\": "Ὣ",
    "*w(\\|": "ᾫ",
    "*w(|": "ᾩ",
    "*w)": "Ὠ",
    "*w)/": "Ὤ",
    "*w)/|": "ᾬ",
    "*w)=": "Ὦ",
    "*w)=|": "ᾮ",
    "*w)\\": "Ὢ",
    "*w)\\|": "ᾪ",
    "*w)|": "ᾨ",
    "*w/": "Ώ",
    "*w\\": "Ὼ",
    "*w|": "ῼ",
    "*x": "Χ",
    "*y": "Ψ",
    "*z": "Ζ",
    "*|A": "ᾼ",
    "*|H": "ῌ",
    "*|W": "ῼ",
    "*|a": "ᾼ",
    "*|h": "ῌ",
    "*|w": "ῼ",
    "+": " ̈",
    ",": ",",
    "-": "-",
    ".": ".",
    "/": " ́",
    ":": "·",
    ";": ";",
    "=": " ͂",
    "A": "α",
    "A(": "ἁ",
    "A(/": "ἅ",
    "A(/|": "ᾅ",
    "A(=": "ἇ",
    "A(=|": "ᾇ",
    "A(\\": "ἃ",
    "A(\\|": "ᾃ",
    "A(|": "ᾁ",
    "A)": "ἀ",
    "A)/": "ἄ",
    "A)/|": "ᾄ",
    "A)=": "ἆ",
    "A)=|": "ᾆ",
    "A)\\": "ἂ",
    "A)\\|": "ᾂ",
    "A)|": "ᾀ",
    "A/": "ά",
    "A/|": "ᾴ",
    "A=": "ᾶ",
    "A=|": "ᾷ",
    "A\\": "ὰ",
    "A\\|": "ᾲ",
    "A|": "ᾳ",
    "B": "β",
    "C": "ξ",
    "D": "δ",
    "E": "ε",
    "E(": "ἑ",
    "E(/": "ἕ",
    "E(\\": "ἓ",
    "E)": "ἐ",
    "E)/": "ἔ",
    "E)\\": "ἒ",
    "E/": "έ",
    "E\\": "ὲ",
    "F": "φ",
    "G": "γ",
    "H": "η",
    "H(": "ἡ",
    "H(/": "ἥ",
    "H(/|": "ᾕ",
    "H(=": "ἧ",
    "H(=|": "ᾗ",
    "H(\\": "ἣ",
    "H(\\|": "ᾓ",
    "H(|": "ᾑ",
    "H)": "ἠ",
    "H)/": "ἤ",
    "H)/|": "ᾔ",
    "H)=": "ἦ",
    "H)=|": "ᾖ",
    "H)\\": "ἢ",
    "H)\\|": "ᾒ",
    "H)|": "ᾐ",
    "H/": "ή",
    "H/|": "ῄ",
    "H=": "ῆ",
    "H=|": "ῇ",
    "H\\": "ὴ",
    "H\\|": "ῂ",
    "H|": "ῃ",
    "I": "ι",
    "I(": "ἱ",
    "I(/": "ἵ",
    "I(=": "ἷ",
    "I(\\": "ἳ",
    "I)": "ἰ",
    "I)/": "ἴ",
    "I)=": "ἶ",
    "I)\\": "ἲ",
    "I+": "ϊ",
    "I/": "ί",
    "I/+": "ΐ",
    "I+/": "ΐ",
    "I=": "ῖ",
    "I=+": "ῗ",
    "I+=": "ῗ",
    "I\\": "ὶ",
    "I\\+": "ῒ",
    "I+\\": "ῒ",
    "J": "ς",
    "K": "κ",
    "L": "λ",
    "M": "μ",
    "N": "ν",
    "O": "ο",
    "O(": "ὁ",
    "O(/": "ὅ",
    "O(\\": "ὃ",
    "O)": "ὀ",
    "O)/": "ὄ",
    "O)\\": "ὂ",
    "O/": "ό",
    "O\\": "ὸ",
    "P": "π",
    "Q": "θ",
    "R": "ρ",
    "R(": "ῥ",
    "R)": "ῤ",
    "S": "σ",
    "S1": "σ",
    "S2": "ς",
    "S3": "ϲ",
    "T": "τ",
    "U": "υ",
    "U(": "ὑ",
    "U(/": "ὕ",
    "U(=": "ὗ",
    "U(\\": "ὓ",
    "U)": "ὐ",
    "U)/": "ὔ",
    "U)=": "ὖ",
    "U)\\": "ὒ",
    "U+": "ϋ",
    "U/": "ύ",
    "U/+": "ΰ",
    "U+/": "ΰ",
    "U=": "ῦ",
    "U=+": "ῧ",
    "U+=": "ῧ",
    "U\\": "ὺ",
    "U\\+": "ῢ",
    "U+\\": "ῢ",
    "W": "ω",
    "W(": "ὡ",
    "W(/": "ὥ",
    "W(/|": "ᾥ",
    "W(=": "ὧ",
    "W(=|": "ᾧ",
    "W(\\": "ὣ",
    "W(\\|": "ᾣ",
    "W(|": "ᾡ",
    "W)": "ὠ",
    "W)/": "ὤ",
    "W)/|": "ᾤ",
    "W)=": "ὦ",
    "W)=|": "ᾦ",
    "W)\\": "ὢ",
    "W)\\|": "ᾢ",
    "W)|": "ᾠ",
    "W/": "ώ",
    "W/|": "ῴ",
    "W=": "ῶ",
    "W=|": "ῷ",
    "W\\": "ὼ",
    "W\\|": "ῲ",
    "W|": "ῳ",
    "X": "χ",
    "Y": "ψ",
    "Z": "ζ",
    "\\": "`",
    "_": "—",
    "a": "α",
    "a(": "ἁ",
    "a(/": "ἅ",
    "a(/|": "ᾅ",
    "a(=": "ἇ",
    "a(=|": "ᾇ",
    "a(\\": "ἃ",
    "a(\\|": "ᾃ",
    "a(|": "ᾁ",
    "a)": "ἀ",
    "a)/": "ἄ",
    "a)/|": "ᾄ",
    "a)=": "ἆ",
    "a)=|": "ᾆ",
    "a)\\": "ἂ",
    "a)\\|": "ᾂ",
    "a)|": "ᾀ",
    "a/": "ά",
    "a/|": "ᾴ",
    "a=": "ᾶ",
    "a=|": "ᾷ",
    "a\\": "ὰ",
    "a\\|": "ᾲ",
    "a|": "ᾳ",
    "b": "β",
    "c": "ξ",
    "d": "δ",
    "e": "ε",
    "e(": "ἑ",
    "e(/": "ἕ",
    "e(\\": "ἓ",
    "e)": "ἐ",
    "e)/": "ἔ",
    "e)\\": "ἒ",
    "e/": "έ",
    "e\\": "ὲ",
    "f": "φ",
    "g": "γ",
    "h": "η",
    "h(": "ἡ",
    "h(/": "ἥ",
    "h(/|": "ᾕ",
    "h(=": "ἧ",
    "h(=|": "ᾗ",
    "h(\\": "ἣ",
    "h(\\|": "ᾓ",
    "h(|": "ᾑ",
    "h)": "ἠ",
    "h)/": "ἤ",
    "h)/|": "ᾔ",
    "h)=": "ἦ",
    "h)=|": "ᾖ",
    "h)\\": "ἢ",
    "h)\\|": "ᾒ",
    "h)|": "ᾐ",
    "h/": "ή",
    "h/|": "ῄ",
    "h=": "ῆ",
    "h=|": "ῇ",
    "h\\": "ὴ",
    "h\\|": "ῂ",
    "h|": "ῃ",
    "i": "ι",
    "i(": "ἱ",
    "i(/": "ἵ",
    "i(=": "ἷ",
    "i(\\": "ἳ",
    "i)": "ἰ",
    "i)/": "ἴ",
    "i)=": "ἶ",
    "i)\\": "ἲ",
    "i+": "ϊ",
    "i/": "ί",
    "i/+": "ΐ",
    "i+/": "ΐ",
    "i=": "ῖ",
    "i=+": "ῗ",
    "i+=": "ῗ",
    "i\\": "ὶ",
    "i\\+": "ῒ",
    "i+\\": "ῒ",
    "j": "ς",
    "k": "κ",
    "l": "λ",
    "m": "μ",
    "n": "ν",
    "o": "ο",
    "o(": "ὁ",
    "o(/": "ὅ",
    "o(\\": "ὃ",
    "o)": "ὀ",
    "o)/": "ὄ",
    "o)\\": "ὂ",
    "o/": "ό",
    "o\\": "ὸ",
    "p": "π",
    "q": "θ",
    "r": "ρ",
    "r(": "ῥ",
    "r)": "ῤ",
    "s": "σ",
    "s1": "σ",
    "s2": "ς",
    "s3": "ϲ",
    "t": "τ",
    "u": "υ",
    "u(": "ὑ",
    "u(/": "ὕ",
    "u(=": "ὗ",
    "u(\\": "ὓ",
    "u)": "ὐ",
    "u)/": "ὔ",
    "u)=": "ὖ",
    "u)\\": "ὒ",
    "u+": "ϋ",
    "u/": "ύ",
    "u/+": "ΰ",
    "u+/": "ΰ",
    "u=": "ῦ",
    "u=+": "ῧ",
    "u+=": "ῧ",
    "u\\": "ὺ",
    "u\\+": "ῢ",
    "u+\\": "ῢ",
    "w": "ω",
    "w(": "ὡ",
    "w(/": "ὥ",
    "w(/|": "ᾥ",
    "w(=": "ὧ",
    "w(=|": "ᾧ",
    "w(\\": "ὣ",
    "w(\\|": "ᾣ",
    "w(|": "ᾡ",
    "w)": "ὠ",
    "w)/": "ὤ",
    "w)/|": "ᾤ",
    "w)=": "ὦ",
    "w)=|": "ᾦ",
    "w)\\": "ὢ",
    "w)\\|": "ᾢ",
    "w)|": "ᾠ",
    "w/": "ώ",
    "w/|": "ῴ",
    "w=": "ῶ",
    "w=|": "ῷ",
    "w\\": "ὼ",
    "w\\|": "ῲ",
    "w|": "ῳ",
    "x": "χ",
    "y": "ψ",
    "z": "ζ",
}

g_to_b = {
    " ́": "/",
    " ̈": "+",
    " ͂": "=",
    ",": ",",
    "-": "-",
    ".": ".",
    ";": ";",
    "`": "\\",
    "·": ":",
    "ʹ": "#",
    "ʼ": ")",
    "ʽ": "(",
    "Ά": "*/a",
    "Έ": "*/e",
    "Ή": "*/h",
    "Ί": "*/i",
    "Ό": "*/o",
    "Ύ": "*/u",
    "Ώ": "*/w",
    "ΐ": "i/+",
    "Α": "*a",
    "Β": "*b",
    "Γ": "*g",
    "Δ": "*d",
    "Ε": "*e",
    "Ζ": "*z",
    "Η": "*h",
    "Θ": "*q",
    "Ι": "*i",
    "Κ": "*k",
    "Λ": "*l",
    "Μ": "*m",
    "Ν": "*n",
    "Ξ": "*c",
    "Ο": "*o",
    "Π": "*p",
    "Ρ": "*r",
    "Σ": "*s",
    "Τ": "*t",
    "Υ": "*u",
    "Φ": "*f",
    "Χ": "*x",
    "Ψ": "*y",
    "Ω": "*w",
    "Ϊ": "*+i",
    "Ϋ": "*+u",
    "ά": "a/",
    "έ": "e/",
    "ή": "h/",
    "ί": "i/",
    "ΰ": "u/+",
    "α": "a",
    "β": "b",
    "γ": "g",
    "δ": "d",
    "ε": "e",
    "ζ": "z",
    "η": "h",
    "θ": "q",
    "ι": "i",
    "κ": "k",
    "λ": "l",
    "μ": "m",
    "ν": "n",
    "ξ": "c",
    "ο": "o",
    "π": "p",
    "ρ": "r",
    "ς": "s",
    "σ": "s",
    "τ": "t",
    "υ": "u",
    "φ": "f",
    "χ": "x",
    "ψ": "y",
    "ω": "w",
    "ϊ": "i+",
    "ϋ": "u+",
    "ό": "o/",
    "ύ": "u/",
    "ώ": "w/",
    "ϲ": "s3",
    "Ϲ": "*s3",
    "ἀ": "a)",
    "ἁ": "a(",
    "ἂ": "a)\\",
    "ἃ": "a(\\",
    "ἄ": "a)/",
    "ἅ": "a(/",
    "ἆ": "a)=",
    "ἇ": "a(=",
    "Ἀ": "*)a",
    "Ἁ": "*(a",
    "Ἂ": "*)\\a",
    "Ἃ": "*(\\a",
    "Ἄ": "*)/a",
    "Ἅ": "*(/a",
    "Ἆ": "*)=a",
    "Ἇ": "*(=a",
    "ἐ": "e)",
    "ἑ": "e(",
    "ἒ": "e)\\",
    "ἓ": "e(\\",
    "ἔ": "e)/",
    "ἕ": "e(/",
    "Ἐ": "*)e",
    "Ἑ": "*(e",
    "Ἒ": "*)\\e",
    "Ἓ": "*(\\e",
    "Ἔ": "*)/e",
    "Ἕ": "*(/e",
    "ἠ": "h)",
    "ἡ": "h(",
    "ἢ": "h)\\",
    "ἣ": "h(\\",
    "ἤ": "h)/",
    "ἥ": "h(/",
    "ἦ": "h)=",
    "ἧ": "h(=",
    "Ἠ": "*)h",
    "Ἡ": "*(h",
    "Ἢ": "*)\\h",
    "Ἣ": "*(\\h",
    "Ἤ": "*)/h",
    "Ἥ": "*(/h",
    "Ἦ": "*)=h",
    "Ἧ": "*(=h",
    "ἰ": "i)",
    "ἱ": "i(",
    "ἲ": "i)\\",
    "ἳ": "i(\\",
    "ἴ": "i)/",
    "ἵ": "i(/",
    "ἶ": "i)=",
    "ἷ": "i(=",
    "Ἰ": "*)i",
    "Ἱ": "*(i",
    "Ἲ": "*)\\i",
    "Ἳ": "*(\\i",
    "Ἴ": "*)/i",
    "Ἵ": "*(/i",
    "Ἶ": "*)=i",
    "Ἷ": "*(=i",
    "ὀ": "o)",
    "ὁ": "o(",
    "ὂ": "o)\\",
    "ὃ": "o(\\",
    "ὄ": "o)/",
    "ὅ": "o(/",
    "Ὀ": "*)o",
    "Ὁ": "*(o",
    "Ὂ": "*)\\o",
    "Ὃ": "*(\\o",
    "Ὄ": "*)/o",
    "Ὅ": "*(/o",
    "ὐ": "u)",
    "ὑ": "u(",
    "ὒ": "u)\\",
    "ὓ": "u(\\",
    "ὔ": "u)/",
    "ὕ": "u(/",
    "ὖ": "u)=",
    "ὗ": "u(=",
    "Ὑ": "*(u",
    "Ὓ": "*(\\u",
    "Ὕ": "*(/u",
    "Ὗ": "*(=u",
    "ὠ": "w)",
    "ὡ": "w(",
    "ὢ": "w)\\",
    "ὣ": "w(\\",
    "ὤ": "w)/",
    "ὥ": "w(/",
    "ὦ": "w)=",
    "ὧ": "w(=",
    "Ὠ": "*)w",
    "Ὡ": "*(w",
    "Ὢ": "*)\\w",
    "Ὣ": "*(\\w",
    "Ὤ": "*)/w",
    "Ὥ": "*(/w",
    "Ὦ": "*)=w",
    "Ὧ": "*(=w",
    "ὰ": "a\\",
    "ὲ": "e\\",
    "ὴ": "h\\",
    "ὶ": "i\\",
    "ὸ": "o\\",
    "ὺ": "u\\",
    "ὼ": "w\\",
    "ᾀ": "a)|",
    "ᾁ": "a(|",
    "ᾂ": "a)\\|",
    "ᾃ": "a(\\|",
    "ᾄ": "a)/|",
    "ᾅ": "a(/|",
    "ᾆ": "a)=|",
    "ᾇ": "a(=|",
    "ᾈ": "*)a|",
    "ᾉ": "*(a|",
    "ᾊ": "*)\\a|",
    "ᾋ": "*(\\a|",
    "ᾌ": "*)/a|",
    "ᾍ": "*(/a|",
    "ᾎ": "*)=a|",
    "ᾏ": "*(=a|",
    "ᾐ": "h)|",
    "ᾑ": "h(|",
    "ᾒ": "h)\\|",
    "ᾓ": "h(\\|",
    "ᾔ": "h)/|",
    "ᾕ": "h(/|",
    "ᾖ": "h)=|",
    "ᾗ": "h(=|",
    "ᾘ": "*)h|",
    "ᾙ": "*(h|",
    "ᾚ": "*)\\h|",
    "ᾛ": "*(\\h|",
    "ᾜ": "*)/h|",
    "ᾝ": "*(/h|",
    "ᾞ": "*)=h|",
    "ᾟ": "*(=h|",
    "ᾠ": "w)|",
    "ᾡ": "w(|",
    "ᾢ": "w)\\|",
    "ᾣ": "w(\\|",
    "ᾤ": "w)/|",
    "ᾥ": "w(/|",
    "ᾦ": "w)=|",
    "ᾧ": "w(=|",
    "ᾨ": "*)w|",
    "ᾩ": "*(w|",
    "ᾪ": "*)\\w|",
    "ᾫ": "*(\\w|",
    "ᾬ": "*)/w|",
    "ᾭ": "*(/w|",
    "ᾮ": "*)=w|",
    "ᾯ": "*(=w|",
    "ᾲ": "a\\|",
    "ᾳ": "a|",
    "ᾴ": "a/|",
    "ᾶ": "a=",
    "ᾷ": "a=|",
    "Ὰ": "*\\a",
    "ᾼ": "*a|",
    "᾽": "'",
    "ῂ": "h\\|",
    "ῃ": "h|",
    "ῄ": "h/|",
    "ῆ": "h=",
    "ῇ": "h=|",
    "Ὲ": "*\\e",
    "Ὴ": "*\\h",
    "ῌ": "*h|",
    "ῒ": "i\\+",
    "ῖ": "i=",
    "ῗ": "i=+",
    "Ὶ": "*\\i",
    "ῢ": "u\\+",
    "ῤ": "r)",
    "ῥ": "r(",
    "ῦ": "u=",
    "ῧ": "u=+",
    "Ὺ": "*\\u",
    "Ῥ": "*(r",
    "ῲ": "w\\|",
    "ῳ": "w|",
    "ῴ": "w/|",
    "ῶ": "w=",
    "ῷ": "w=|",
    "Ὸ": "*\\o",
    "Ὼ": "*\\w",
    "ῼ": "*w|",
    "—": "_",
}


def to_betacode(unicode_text):
    """
    >>> to_betacode('μῆνιν')
    'mh=nin'
    """
    return "".join(g_to_b.get(c, c) for c in unicode_text)


def to_perseus_betacode(unicode_text):
    """
    >>> to_perseus_betacode('μῆνιν')
    'mhnin'
    """
    baby_text = remove_diacrtics(unicode_text.lower())
    return to_betacode(baby_text)


def prefixes(string, start=0):
    """
    >>> list(prefixes('abc'))
    ['a', 'ab', 'abc']
    """
    for i in range(start, len(string)):
        yield string[start : i + 1]


def longest_substring_in_dictionary(string, dictionary, start=0):
    """
    >>> longest_substring_in_dictionary('abcdef', {'a': 1, 'ab': 2, 'abc': 3})
    'abc'
    """
    found = False
    longest = ""
    for substring in prefixes(string, start=start):
        if substring in dictionary:
            found = True
            longest = substring
        else:
            break
    if found:
        return longest
    return None


def fix_sigma_at_word_boundries(greek_text):
    """
    >>> fix_sigma_at_word_boundries('ἀπὸστοισ; ἄνοισ σφαιροῖσ ΘΕΟΣ')
    'ἀπὸστοις; ἄνοις σφαιροῖς ΘΕΟΣ'
    """
    return re.sub(r"σ\b", "ς", greek_text)


def to_unicode(betacode_text):
    """
    >>> to_unicode('mh=nin')
    'μῆνιν'
    """
    unicode_text = ""
    start = 0
    while start < len(betacode_text):
        substring = longest_substring_in_dictionary(betacode_text, b_to_g, start)
        if substring is None:
            unicode_text += betacode_text[start]
            start += 1
        else:
            unicode_text += b_to_g[substring]
            start += len(substring)
    return fix_sigma_at_word_boundries(unicode_text)


def split_greek_phrase_at_word_boundaries(greek_text):
    """
    >>> split_greek_phrase_at_word_boundaries('ἓν οἶδα ὅτι οὐδὲν οἶδα.')
    ['ἓν', 'οἶδα', 'ὅτι', 'οὐδὲν', 'οἶδα', '.']
    """
    return [x.strip() for x in re.split(r"\b", greek_text) if x and x.strip()]


def words_only(tokens):
    """
    Words only, no punctuation.
    >>> words_only(split_greek_phrase_at_word_boundaries("ἓν οἶδα ὅτι οὐδὲν οἶδα·"))
    ['ἓν', 'οἶδα', 'ὅτι', 'οὐδὲν', 'οἶδα']
    """
    return [x for x in tokens if x not in string.punctuation and x != "·"]


def word_tokens(greek_text):
    """
    >>> word_tokens('ἓν οἶδα, ὅτι οὐδὲν οἶδα.')
    ['ἓν', 'οἶδα', 'ὅτι', 'οὐδὲν', 'οἶδα']
    """
    return words_only(split_greek_phrase_at_word_boundaries(greek_text))


def remove_diacrtics(greek_text):
    """
    Remove the diacritics from a Greek text.
    including accents, breathings, iota subscripts, diaeresis, macrons, etc.
    >>> remove_diacrtics('ἓν οἶδα ὅτι οὐδὲν οἶδα.')
    'εν οιδα οτι ουδεν οιδα.'
    """
    return "".join(
        c
        for c in unicodedata.normalize("NFD", greek_text)
        if unicodedata.category(c) != "Mn"
    )


if __name__ == "__main__":
    import doctest

    doctest.testmod()
